<aura:component implements="flexipage:availableForAllPageTypes" access="global">
    <aura:attribute name="gameModeOptions" type="List" default="[
        {'label': 'Easy', 'value': 'easy'},
        {'label': 'Medium', 'value': 'medium'},
        {'label': 'Hard', 'value': 'hard'}
    ]"/>
    <aura:attribute name="board" type="List" default="[]"/>
    <aura:attribute name="boardSize" type="Integer" default="4"/>
    <aura:attribute name="columnClass" type="String" default="slds-size_1-of-4"/>
    <!-- Placeholder arrays for empty grid -->
    <aura:attribute name="placeholderRows" type="List" default="[1,2,3,4]"/>
    <aura:attribute name="placeholderCols" type="List" default="[1,2,3,4]"/>
    
    <lightning:card title="Word Shuffle" iconName="utility:puzzle">
        <div class="slds-p-horizontal_medium">
            <!-- Horizontally Aligned Controls Section -->
            <lightning:layout horizontalAlign="center" multipleRows="false" class="slds-m-bottom_medium controls-layout">
                <lightning:layoutItem size="4" padding="horizontal-small">
                    <lightning:combobox
                      name="gameMode"
                      label="Game Mode"
                      value="inProgress"
                      placeholder="Select Game Mode"
                      options="{!v.gameModeOptions}"
                      onchange="{!c.handleGameModeChange}"
                    />
                </lightning:layoutItem>
                
                <lightning:layoutItem padding="horizontal-small" flexibility="auto" class="controls-alignment">
                    <lightning:button 
                      variant="brand"
                      label="Start New Game" 
                      title="Start New Game"
                      onclick="{!c.startNewGame}" 
                      class="slds-m-right_x-small"
                    />
                    <lightning:button 
                      variant="neutral"
                      label="Reshuffle" 
                      title="Reshuffle"
                      onclick="{!c.startGame}"
                    />
                </lightning:layoutItem>
            </lightning:layout>
            
            <!-- Game Board Grid -->
            <div class="board-container slds-m-top_medium">
                <aura:iteration items="{!v.board}" var="row" indexVar="rowIndex">
                    <div class="slds-grid slds-gutters_small slds-p-vertical_x-small">
                        <aura:iteration items="{!row}" var="cell" indexVar="colIndex">
                            <div class="{! 'slds-col ' + v.columnClass}">
                                <div class="game-tile slds-box slds-box_small slds-theme_default slds-text-align_center slds-text-heading_medium">
                                    {!cell.letter}
                                </div>
                            </div>
                        </aura:iteration>
                    </div>
                </aura:iteration>
                
                <!-- Placeholder grid if board is empty -->
                <aura:if isTrue="{!empty(v.board)}">
                    <div class="placeholder-grid">
                        <aura:iteration items="{!v.placeholderRows}" var="row">
                            <div class="slds-grid slds-gutters_small slds-p-vertical_x-small">
                                <aura:iteration items="{!v.placeholderCols}" var="col">
                                    <div class="{! 'slds-col ' + v.columnClass}">
                                        <div class="game-tile slds-box slds-box_small slds-theme_default slds-text-align_center">
                                            &nbsp;
                                        </div>
                                    </div>
                                </aura:iteration>
                            </div>
                        </aura:iteration>
                    </div>
                </aura:if>
            </div>
        </div>
    </lightning:card>
</aura:component>